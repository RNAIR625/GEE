{
  "canadian_provinces": {
    "hst_provinces": {
      "description": "Provinces using Harmonized Sales Tax (replaces GST+PST)",
      "provinces": [
        {
          "code": "ON",
          "name": "Ontario",
          "postal_codes": ["M5V", "K1A", "L8S", "N2L"],
          "hst_rate": 0.13,
          "gst_rate": 0.0,
          "pst_rate": 0.0,
          "total_rate": 0.13,
          "test_cases": [
            {"postal_code": "M5V", "base_amount": 100, "expected_tax": 13.00},
            {"postal_code": "K1A", "base_amount": 500, "expected_tax": 65.00},
            {"postal_code": "L8S", "base_amount": 1000, "expected_tax": 130.00}
          ]
        },
        {
          "code": "NB",
          "name": "New Brunswick",
          "postal_codes": ["E1C", "E2A", "E3A"],
          "hst_rate": 0.15,
          "gst_rate": 0.0,
          "pst_rate": 0.0,
          "total_rate": 0.15,
          "test_cases": [
            {"postal_code": "E1C", "base_amount": 100, "expected_tax": 15.00}
          ]
        },
        {
          "code": "NS",
          "name": "Nova Scotia",
          "postal_codes": ["B3H", "B1M", "B2S"],
          "hst_rate": 0.15,
          "gst_rate": 0.0,
          "pst_rate": 0.0,
          "total_rate": 0.15,
          "test_cases": [
            {"postal_code": "B3H", "base_amount": 100, "expected_tax": 15.00}
          ]
        },
        {
          "code": "PE",
          "name": "Prince Edward Island",
          "postal_codes": ["C1A", "C1B", "C1C"],
          "hst_rate": 0.15,
          "gst_rate": 0.0,
          "pst_rate": 0.0,
          "total_rate": 0.15,
          "test_cases": [
            {"postal_code": "C1A", "base_amount": 100, "expected_tax": 15.00}
          ]
        },
        {
          "code": "NL",
          "name": "Newfoundland and Labrador",
          "postal_codes": ["A1C", "A2H", "A5A"],
          "hst_rate": 0.15,
          "gst_rate": 0.0,
          "pst_rate": 0.0,
          "total_rate": 0.15,
          "test_cases": [
            {"postal_code": "A1C", "base_amount": 100, "expected_tax": 15.00}
          ]
        }
      ]
    },
    "gst_pst_provinces": {
      "description": "Provinces using separate GST and PST",
      "provinces": [
        {
          "code": "QC",
          "name": "Quebec",
          "postal_codes": ["H3A", "G1R", "H1A"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.09975,
          "total_rate": 0.14975,
          "test_cases": [
            {"postal_code": "H3A", "base_amount": 100, "expected_tax": 14.98},
            {"postal_code": "G1R", "base_amount": 200, "expected_tax": 29.95}
          ]
        },
        {
          "code": "BC",
          "name": "British Columbia",
          "postal_codes": ["V6B", "V8W", "V1M"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.07,
          "total_rate": 0.12,
          "test_cases": [
            {"postal_code": "V6B", "base_amount": 100, "expected_tax": 12.00},
            {"postal_code": "V8W", "base_amount": 250, "expected_tax": 30.00}
          ]
        },
        {
          "code": "SK",
          "name": "Saskatchewan",
          "postal_codes": ["S4P", "S7K", "S0K"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.06,
          "total_rate": 0.11,
          "test_cases": [
            {"postal_code": "S4P", "base_amount": 100, "expected_tax": 11.00}
          ]
        },
        {
          "code": "MB",
          "name": "Manitoba",
          "postal_codes": ["R3C", "R2W", "R7A"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.07,
          "total_rate": 0.12,
          "test_cases": [
            {"postal_code": "R3C", "base_amount": 100, "expected_tax": 12.00}
          ]
        }
      ]
    },
    "gst_only_provinces": {
      "description": "Provinces/territories using only GST (no provincial tax)",
      "provinces": [
        {
          "code": "AB",
          "name": "Alberta",
          "postal_codes": ["T2P", "T5J", "T1K"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.0,
          "total_rate": 0.05,
          "test_cases": [
            {"postal_code": "T2P", "base_amount": 100, "expected_tax": 5.00},
            {"postal_code": "T5J", "base_amount": 300, "expected_tax": 15.00}
          ]
        },
        {
          "code": "YT",
          "name": "Yukon",
          "postal_codes": ["Y1A", "Y0B", "Y1A"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.0,
          "total_rate": 0.05,
          "test_cases": [
            {"postal_code": "Y1A", "base_amount": 100, "expected_tax": 5.00}
          ]
        },
        {
          "code": "NT",
          "name": "Northwest Territories",
          "postal_codes": ["X1A", "X0E", "X0A"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.0,
          "total_rate": 0.05,
          "test_cases": [
            {"postal_code": "X1A", "base_amount": 100, "expected_tax": 5.00}
          ]
        },
        {
          "code": "NU",
          "name": "Nunavut",
          "postal_codes": ["X0A", "X0B", "X0C"],
          "hst_rate": 0.0,
          "gst_rate": 0.05,
          "pst_rate": 0.0,
          "total_rate": 0.05,
          "test_cases": [
            {"postal_code": "X0A", "base_amount": 100, "expected_tax": 5.00}
          ]
        }
      ]
    }
  },
  "test_scenarios": {
    "valid_postal_codes": [
      "M5V", "H3A", "V6B", "T2P", "S4P", "R3C", "E1C", "B3H", "C1A", "A1C", "Y1A", "X1A", "X0A"
    ],
    "invalid_postal_codes": [
      "123", "AAA", "Z9Z", "", "M5", "M5VV", "9M5", "m5v", "M5V1A1"
    ],
    "edge_cases": [
      {
        "description": "Very small amount",
        "postal_code": "M5V",
        "base_amount": 0.01,
        "expected_tax": 0.00
      },
      {
        "description": "Large amount",
        "postal_code": "H3A",
        "base_amount": 10000,
        "expected_tax": 1497.50
      },
      {
        "description": "Zero amount",
        "postal_code": "T2P",
        "base_amount": 0,
        "expected_tax": 0.00
      }
    ],
    "performance_tests": [
      {
        "description": "Concurrent requests",
        "concurrent_requests": 50,
        "request_data": {
          "postal_code": "M5V",
          "base_amount": 100
        },
        "expected_response_time_ms": 100
      }
    ]
  },
  "api_endpoints": {
    "flow_execution": "POST /api/v1/flows/1/execute",
    "health_check": "GET /api/v1/health",
    "flows_list": "GET /api/v1/flows",
    "reload_runtime": "POST /api/v1/reload"
  },
  "expected_response_format": {
    "success": true,
    "flow_id": 1,
    "result": {
      "errors": [],
      "execution_time": 0,
      "output": {},
      "variables": {
        "postal_code_exists": true,
        "gst_rate": 0.05,
        "hst_rate": 0.0,
        "pst_rate": 0.09975,
        "total_tax": 14.98,
        "func_exists_in_pincode_result": true,
        "func_get_gst_result": 0.05,
        "func_get_hst_result": 0.0,
        "func_get_pst_result": 0.09975,
        "func_calculate_tax_amount_result": 14.98
      }
    }
  }
}